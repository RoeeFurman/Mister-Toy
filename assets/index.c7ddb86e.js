import{r as v,o as u,c as d,a as o,b as h,w as g,d as a,e as b,f as y,v as B,g as D,h as f,t as c,F as $,i as w,j as x,k,l as P,m as Z,n as C,p as q,q as V}from"./vendor.66b3c9cf.js";const N=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}};N();var p=(t,e)=>{const s=t.__vccOpts||t;for(const[i,l]of e)s[i]=l;return s};const I={},O={class:"main-header flex items-center justify-between"},R=o("div",{class:"logo uppercase"},[o("h2",null,"Mister-Toy")],-1),U=a("Home"),L=a(" | "),M=a("About"),H=a(" | "),J=a("Toys"),j=o("hr",null,null,-1);function K(t,e){const s=v("router-link");return u(),d("header",O,[R,o("nav",null,[h(s,{class:"link",to:"/"},{default:g(()=>[U]),_:1}),L,h(s,{class:"link",to:"/about"},{default:g(()=>[M]),_:1}),H,h(s,{class:"link",to:"/toy"},{default:g(()=>[J]),_:1}),j])])}var W=p(I,[["render",K]]);const Y={name:"app",created(){this.$store.dispatch({type:"loadToys"})},components:{appHeader:W}};function z(t,e,s,i,l,r){const n=v("app-header"),m=v("router-view");return u(),d("section",null,[h(n),h(m)])}var G=p(Y,[["render",z]]);const Q={name:"home"},X=o("h1",null,"Home page",-1),ee=[X];function te(t,e,s,i,l,r){return u(),d("section",null,ee)}var oe=p(Q,[["render",te]]);const ne={},le={class:"about"},re=o("h1",null,"This is an about page",-1),se=[re];function ie(t,e){return u(),d("div",le,se)}var ae=p(ne,[["render",ie]]);const A={saveToStorage:ue,loadFromStorage:de,makeId:ce};function ue(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function de(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function ce(t=8){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}const T="//localhost:3030/api/toy/",F="toys_db";fe();const _={query:ye,getById:pe,remove:_e,save:E,getEmptyToy:me};function ye(){return b.get(T).then(t=>t.data)}function pe(t){return b.get(T+t).then(e=>e.data).then(e=>(console.log(e),e.reviews||(e.reviews=[{txt:"Best Toy in the world",rate:5},{txt:"Worst Toy in the world",rate:1}]),E(e),e))}function _e(t){return b.delete(T+t)}function E(t){return t._id?(console.log(t._id),b.put(T+t._id,t).then(e=>e.data)):b.post(T,t).then(e=>e.data)}function me(){return{_id,name:"Talking Doll",price:123,type:"Funny",createdAt:33321111111,inStock:!0,reviews}}function fe(){let t=A.loadFromStorage(F);return(!t||!t.length)&&(t=[{_id:1,name:"egestas massa",price:19,type:"Adult",createdAt:"1972-10-14T19:49:06.711Z",inStock:!0,labels:["Doll"]},{_id:2,name:"vestibulum vestibulum",price:20,type:"Funny",createdAt:"1998-08-30T01:09:22.244Z",inStock:!1,labels:["Battery Powered"]},{_id:3,name:"vel lacus",price:62,type:"Educational",createdAt:"1979-11-04T23:47:17.942Z",inStock:!0,labels:["Battery Powered","Baby"]},{_id:4,name:"vitae quis",price:57,type:"Funny",createdAt:"1977-04-02T11:38:09.588Z",inStock:!1,labels:["Doll","Baby"]},{_id:5,name:"magna convallis",price:78,type:"Adult",createdAt:"1998-07-27T22:40:11.268Z",inStock:!0,labels:["Battery Powered"]},{_id:6,name:"pulvinar libero",price:76,type:"Funny",createdAt:"1997-01-22T05:42:08.090Z",inStock:!0,labels:["Battery Powered","Baby"]},{_id:7,name:"tincidunt orci",price:96,type:"Adult",createdAt:"1990-11-10T15:56:06.107Z",inStock:!1,labels:["Battery Powered","Baby","Doll"]},{_id:8,name:"amet aliquam",price:56,type:"Educational",createdAt:"1970-09-15T17:39:04.801Z",inStock:!0,labels:["Battery Powered","Baby","Doll"]},{_id:9,name:"at rutrum",price:51,type:"Adult",createdAt:"1991-09-16T13:50:49.224Z",inStock:!0,labels:["Battery Powered","Doll"]},{_id:10,name:"quis donec",price:9,type:"Educational",createdAt:"1995-11-06T16:22:04.306Z",inStock:!0,labels:["Battery Powered","Baby"]},{_id:11,name:"mattis quis",price:72,type:"Funny",createdAt:"1973-05-08T08:12:38.649Z",inStock:!0,labels:["Battery Powered"]},{_id:12,name:"sagittis ante",price:60,type:"Adult",createdAt:"1982-08-21T17:39:03.373Z",inStock:!0,labels:["Battery Powered"]},{_id:13,name:"orci consectetur",price:54,type:"Educational",createdAt:"1980-12-25T07:29:36.281Z",inStock:!0,labels:["Doll"]},{_id:14,name:"odio tincidunt",price:1,type:"Funny",createdAt:"1979-12-30T08:22:05.349Z",inStock:!1,labels:["Doll"]},{_id:15,name:"pharetra neque",price:99,type:"Funny",createdAt:"1991-06-01T20:10:08.749Z",inStock:!1,labels:["Baby"]},{_id:16,name:"vel scelerisque",price:12,type:"Educational",createdAt:"1996-03-13T14:25:41.107Z",inStock:!0,labels:["Doll"]},{_id:17,name:"pulvinar et",price:44,type:"Funny",createdAt:"1972-11-04T09:20:21.768Z",inStock:!1,labels:["Battery Powered","Baby","Doll"]},{_id:18,name:"at placerat",price:77,type:"Funny",createdAt:"1984-07-14T11:05:39.761Z",inStock:!1,labels:["Baby","Doll"]},{_id:19,name:"rutrum adipiscing",price:25,type:"Adult",createdAt:"1984-09-06T15:11:09.177Z",inStock:!1,labels:["Battery Powered","Doll"]},{_id:20,name:"eros ac",price:13,type:"Funny",createdAt:"1977-06-05T14:00:44.047Z",inStock:!1,labels:["Battery Powered","Baby","Doll"]}],A.saveToStorage(F,t)),t}const he={name:"toy-filter",data(){return{filterBy:{name:"",inStock:"",type:"",label:""}}},methods:{setFilter(){console.log(this.filterBy),this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}}},ve={class:"toy-filter"},be=o("label",null," Search a toy: ",-1),Te=o("option",{value:""},"All",-1),ge=o("option",{value:"funny"},"funny",-1),Be=o("option",{value:"educational"},"educational",-1),ke=o("option",{value:"adult"},"adult",-1),Se=[Te,ge,Be,ke],Ae=a(" All"),Fe=a(" In Stock "),$e=o("hr",null,null,-1),we=o("h4",null,"Labels:",-1),xe=a(" All"),Ee=a(" Doll"),De=a(" Baby"),Pe=a(" Battery Powered");function Ze(t,e,s,i,l,r){return u(),d("section",ve,[be,y(o("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>l.filterBy.name=n),type:"text",onInput:e[1]||(e[1]=(...n)=>r.setFilter&&r.setFilter(...n)),placeholder:"Search by..."},null,544),[[B,l.filterBy.name]]),y(o("select",{name:"filter","onUpdate:modelValue":e[2]||(e[2]=n=>l.filterBy.type=n),onChange:e[3]||(e[3]=(...n)=>r.setFilter&&r.setFilter(...n))},Se,544),[[D,l.filterBy.type]]),o("label",null,[y(o("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=n=>l.filterBy.inStock=n),value:"",onChange:e[5]||(e[5]=(...n)=>r.setFilter&&r.setFilter(...n))},null,544),[[f,l.filterBy.inStock]]),Ae]),o("label",null,[y(o("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=n=>l.filterBy.inStock=n),value:"true",onChange:e[7]||(e[7]=(...n)=>r.setFilter&&r.setFilter(...n))},null,544),[[f,l.filterBy.inStock]]),Fe]),$e,we,o("label",null,[y(o("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=n=>l.filterBy.label=n),value:"All",onChange:e[9]||(e[9]=(...n)=>r.setFilter&&r.setFilter(...n))},null,544),[[f,l.filterBy.label]]),xe]),o("label",null,[y(o("input",{type:"radio","onUpdate:modelValue":e[10]||(e[10]=n=>l.filterBy.label=n),value:"Doll",onChange:e[11]||(e[11]=(...n)=>r.setFilter&&r.setFilter(...n))},null,544),[[f,l.filterBy.label]]),Ee]),o("label",null,[y(o("input",{type:"radio","onUpdate:modelValue":e[12]||(e[12]=n=>l.filterBy.label=n),value:"Baby",onChange:e[13]||(e[13]=(...n)=>r.setFilter&&r.setFilter(...n))},null,544),[[f,l.filterBy.label]]),De]),o("label",null,[y(o("input",{type:"radio","onUpdate:modelValue":e[14]||(e[14]=n=>l.filterBy.label=n),value:"Battery Powered",onChange:e[15]||(e[15]=(...n)=>r.setFilter&&r.setFilter(...n))},null,544),[[f,l.filterBy.label]]),Pe])])}var Ce=p(he,[["render",Ze]]);const qe={name:"toy-preview",props:{toy:Object},components:{},methods:{goToDetail(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(t){this.$emit("removeToy",t)}}},Ve={class:"toy-preview"},Ne=o("span",null,"Name:",-1),Ie=o("span",null,"Price:",-1),Oe=o("span",null,"Type:",-1),Re=o("span",null,"inStock:",-1),Ue={class:"btn-group"},Le=o("hr",null,null,-1);function Me(t,e,s,i,l,r){return u(),d("li",Ve,[o("p",null,[Ne,a(" "+c(s.toy.name),1)]),o("p",null,[Ie,a(" "+c(s.toy.price),1)]),o("p",null,[Oe,a(" "+c(s.toy.type),1)]),o("p",null,[Re,a(" "+c(s.toy.inStock),1)]),o("div",Ue,[o("button",{onClick:e[0]||(e[0]=(...n)=>r.goToEdit&&r.goToEdit(...n))},"edit"),o("button",{onClick:e[1]||(e[1]=(...n)=>r.goToDetail&&r.goToDetail(...n))},"details"),o("button",{onClick:e[2]||(e[2]=n=>r.removeToy(s.toy._id))},"delete")]),Le])}var He=p(qe,[["render",Me]]);const Je={props:{toys:{type:Array,required:!0}},components:{toyPreview:He},methods:{removeToy(t){this.$emit("removeToy",t)}}},je={class:"toy-list"};function Ke(t,e,s,i,l,r){const n=v("toy-preview");return u(),d("ul",je,[(u(!0),d($,null,w(s.toys,m=>(u(),x(n,{onRemoveToy:r.removeToy,toy:m,key:m._id},null,8,["onRemoveToy","toy"]))),128))])}var We=p(Je,[["render",Ke]]);const Ye={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;console.log(this.filterBy.label);let t=[];this.filterBy.inStock?t=this.toys.filter(i=>i.inStock):t=this.toys;let e=[];this.filterBy.type==="adult"?e=t.filter(i=>i.type==="Adult"):this.filterBy.type==="funny"?e=t.filter(i=>i.type==="Funny"):this.filterBy.type==="educational"?e=t.filter(i=>i.type==="Educational"):e=t,console.log(t);const s=new RegExp(this.filterBy.name,"i");return e.filter(i=>s.test(i.name))}},created(){},methods:{loadToys(){_.query().then(t=>this.toys=t)},setFilter(t){this.filterBy=t},goToEdit(){this.$router.push("/toy/edit")},removeToy(t){this.$store.dispatch({type:"removeToy",id:t})}},components:{toyList:We,toyFilter:Ce}},ze={class:"toy-app"},Ge=o("h1",null,"toys",-1),Qe=o("hr",null,null,-1),Xe=o("h1",null,"filter",-1);function et(t,e,s,i,l,r){const n=v("toy-filter"),m=v("toy-list");return u(),d("section",ze,[Ge,h(n,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),Qe,Xe,r.toys?(u(),x(m,{key:0,onRemoveToy:r.removeToy,toys:r.toysToShow},null,8,["onRemoveToy","toys"])):k("",!0)])}var tt=p(Ye,[["render",et]]);const ot={name:"toy-detail",data(){return{toy:null}},created(){const{_id:t}=this.$route.params,e=+t;_.getById(e).then(s=>{console.log(s),this.toy=s})},methods:{goBack(){this.$router.push("/toy")}}},nt={key:0,class:"toy-details"},lt=o("span",null,"ID:",-1),rt=o("span",null,"Name:",-1),st=o("span",null,"Price:",-1),it=o("span",null,"Type:",-1),at=o("span",null,"inStock:",-1),ut=o("span",null,"Reviews:",-1),dt=o("b",null,"Review: ",-1),ct=o("b",null,"Rate:",-1);function yt(t,e,s,i,l,r){return l.toy?(u(),d("section",nt,[o("article",null,[o("p",null,[lt,a(" "+c(l.toy._id),1)]),o("p",null,[rt,a(" "+c(l.toy.name),1)]),o("p",null,[st,a(" "+c(l.toy.price),1)]),o("p",null,[it,a(" "+c(l.toy.type),1)]),o("p",null,[at,a(" "+c(l.toy.inStock),1)]),ut,(u(!0),d($,null,w(l.toy.reviews,n=>(u(),d("p",{key:n},[dt,a(c(n.txt)+", ",1),ct,a(" "+c(n.rate),1)]))),128))]),o("button",{onClick:e[0]||(e[0]=(...n)=>r.goBack&&r.goBack(...n))},"go back")])):k("",!0)}var pt=p(ot,[["render",yt]]);const _t={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:t}=this.$route.params,e=+t;e?(console.log(e),_.getById(e).then(s=>{this.toyToEdit=s})):this.toyToEdit=_.getEmptyToy()},methods:{goBack(){this.$router.push("/toy")},saveToy(){this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},mt={key:0},ft={class:"form-control"},ht=o("label",{for:"txt",class:"form-label"},"Toy name",-1),vt={class:"form-control"},bt=o("label",{for:"speed",class:"form-label"},"Toy price",-1),Tt={class:"btn-group"};function gt(t,e,s,i,l,r){return l.toyToEdit?(u(),d("section",mt,[o("form",{onSubmit:e[4]||(e[4]=P((...n)=>r.saveToy&&r.saveToy(...n),["prevent"])),class:"form"},[o("div",ft,[ht,y(o("input",{required:"","onUpdate:modelValue":e[0]||(e[0]=n=>l.toyToEdit.name=n),id:"txt",type:"text",class:"form-input",placeholder:"Enter your toy name here..."},null,512),[[B,l.toyToEdit.name]])]),o("div",vt,[bt,y(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=n=>l.toyToEdit.price=n),id:"price",type:"number",class:"form-input"},null,512),[[B,l.toyToEdit.price,void 0,{number:!0}]])]),o("div",Tt,[o("button",{onClick:e[2]||(e[2]=(...n)=>r.saveToy&&r.saveToy(...n))},"save"),o("button",{onClick:e[3]||(e[3]=(...n)=>r.goBack&&r.goBack(...n))},"go back")])],32)])):k("",!0)}var Bt=p(_t,[["render",gt]]);const kt=Z({history:C(),routes:[{path:"/",name:"home",component:oe},{path:"/about",name:"about",component:ae},{path:"/toy",name:"toy-app",component:tt},{path:"/toy/:_id",name:"toy-details",component:pt},{path:"/toy/edit/:id?",name:"toy-edit",component:Bt}]});var St={state:{toys:null},getters:{toys(t){return t.toys}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const s=t.toys.findIndex(i=>i._id===e);t.toys.splice(s,1)},saveToy(t,{toy:e}){const s=t.toys.findIndex(i=>i._id===e._id);s!==-1?t.toys.splice(s,1,e):t.toys.push(e)}},actions:{loadToys({commit:t}){_.query().then(e=>{t({type:"setToys",toys:e})})},removeToy({commit:t},{id:e}){_.remove(e).then(()=>{t({type:"removeToy",id:e})})},saveToy(t,{toy:e}){_.save(e).then(s=>{t.commit({type:"saveToy",toy:s}),t.dispatch({type:"loadToys"})})}}};const At=q({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:St}});const S=V(G);S.use(kt);S.use(At);S.mount("#app");
